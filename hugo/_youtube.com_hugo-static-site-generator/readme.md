# Hugo tutorial - Giraffe Academy

[video tutorial](https://www.youtube.com/watch?v=qtIqKaDlqXo&index=1&list=PLLAZ4kZ9dFpOnyRlyS-liKL5ReHDcj4G3)

## L01 Introduction to Hugo

- types of websites:
  - static
    - extremely fast
    - harder to maintain
  - dynamic (requires webserver)
    - dynamic content
    - easier to maintain
- Hugo
  - static site generator
  - opensource, free
  - speed optimized
  - written in GoLang

## L02 Installing Hugo on Windows

Install to this directory:
```
C:\Hugo\bin
```
Add to PATH variable

```sh
echo %PATH%
hugo version
```

## L03 Installing Hugo on Mac

Homebrew
```sh
brew install hugo
```

```
which hugo
hugo version
```

## L04 Creating a New Site / Directory Structure

```
hugo new site <sitename>
```
e.g.:
```
hugo new site first_site
```

- folders:
  - `archetypes` - for definition of metadata
  - `content` - content of the website
  - `data` - for storing files used by the website
  - `layouts` - stores layout files
  - `static` - static elements of the website: images, css, js files
  - `themes` - container of downloaded themes
- files:
  - `contig.toml` - main settings file

## L05 Installing & Using Themes

https://themes.gohugo.io  
https://github.com/giraffeacademy/ga-hugo-theme  

unzip files to `themes/theme_name` folder  
config file for the theme is `theme.toml`  

`config.toml:`
```toml
baseURL = "http://example.org"
languageCode = "en-us"
title = "Hugo | Giraffe Academy"
theme = "<theme-name>"
```

e.g.:
```toml
theme = "ga-hugo-theme"
```

```sh
hugo server
# localhost:1313
```

## L06 Creating & Organizing Content

Generate file into `content` folder:
```sh
hugo new path/filename
```
e.g.:
```sh
hugo new a.md
hugo new dir1/b.md
```
```
localhost:1313/a/
localhost:1313/dir1/b/
```
Front matter is generated for the MD file.

`content/a.md`:
```yaml
---
title: "A"
date: "2017-09-06T10:32:38-04:00"
draft: true
---

This is a.md
```

```sh
hugo server -D 	# serves the draft pages too

hugo server # does not serve the draft pages
```

- the URL reflects the location inside the content folder
- Hugo content types:
  - **single pages** vs. **list pages**
    - single pages
      - for all MD files
      - if directory is not in root level of content folder and has no **_index.md** file
    - list pages
      - home page currently lists other contents
      - autogenerated list template for directories on root level of content folder
        - no automatic list page for `/dir1/dir2`
      - custom list pages in subdirectories: **_index.md**
        - list page for `/dir1/dir2`
        - overwrite auto generated list template for selected directory `/dir1`

e.g.:
```
hugo new dir1/_index.md
hugo new dir1/dir2/_index.md
```

## L07 Front Matter

- is metadata - data about the content files
  - yaml (\-\-\-)
  - toml (+++)
  - json
- variables are key value pairs

YAML example:
```yaml
---
title: "A"
date: "2017-09-06T10:32:38-04:00"
draft: true
---

This is a Markdown file.
```

TOML example:
```toml
+++
title = "A"
date = "2017-09-06T10:32:38-04:00"
draft = true
+++

This is a config file.
```

- Custom format varialbe:
  ```
  author: Mike
  ```

## L08 Archetypes

- the template getting used when Hugo creates the markdown file

`archetypes/default.md`:
```yml
---
title: "{{ replace .TranslationBaseName "-" " " | title }}"
date: "{{ .Date }}"
draft: false
author: "Mike"
---
```

```sh
hugo new b.md
```

`content/b.md`:
```md
---
title: "B"
date: "2017-09-06T11:14:46-04:00"
draft: false
author: "Mike"
---
```

`archetypes/dir1.md`:
```yml
---
title: "{{ replace .TranslationBaseName "-" " " | title }}"
date: "{{ .Date }}"
draft: true
author: "Steve"
---
```

```sh
hugo new dir1/c.md
```

`content/dir1/c.md`:
```md
---
title: "C"
date: "2017-09-06T11:14:46-04:00"
draft: true
author: "Steve"
---
```

## L09 Shortcodes

- insert predefined chunks of HTML into markdown files
- possibility to create custom shortcodes

```
{{< shortcode_name parameter1 >}}
```

e.g. `youtube` shortcode:
```
{{< youtube VIDEO_ID >}}
{{< youtube w7Ft2ymGmfc >}}
```

## L10 Taxonomies

- taxonomy
  - logically group different pieces of content together
  - default taxonomy: **tags** and **categories**

`content/a.md`:
```md
---
title: "A"
date: "2017-09-02T17:50:43-04:00"
draft: false
tags: ["tag1", "tag2", "tag3"]
categories: ["cat1"]
---

This is the A markdown file
```

```
localhost:1313/tags/tag1
localhost:1313/categories/cat1
```

Generated page from list template for the selected `taxonomy`

### Custom Taxonomy

`content/a.md`:
```md
---
title: "A"
date: "2017-09-02T17:50:43-04:00"
draft: false
tags: ["tag1", "tag2", "tag3"]
categories: ["cat1"]
moods: ["Happy", "Upbeat"]
---

This is the A markdown file
```

```
localhost:1313/moods/happy
# 404 error
```

`config.toml`:
```toml
...
[taxonomies]
  tag = "tags"
  category = "categories"
  mood = "moods"
  label = "labels"
```

- When defining a new taxonomy the default taxonomies (`tag` and `category`) also needs to be defined

```
localhost:1313/moods/happy
# ok
```

Generated page from list template for the selected `mood`

## L11 Template Basics

- create overall skeleton of HTML in which the specific data is inserted
- `themes`
  - `<theme_mame>`
    - `layouts`
      - `_default`
        - `list.html` - template used for list pages
        - `single.html` - template used for single pages
      - `partials`
      - `404.html`

e.g.: `themes/<theme_name>/layouts/_default/list.html`:
```html
<html>
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <title>Document</title>
</head>
<body>
     {{ partial "header" (dict "Kind" .Kind "Template" "List") }}
     {{.Content}}
     {{ range .Pages }}
          <div style="border: 1px solid black; margin:10px; padding:10px; ">
               <div style="font-size:20px;">
                    <a href="{{.URL}}">{{.Title}}</a>
               </div>
               <div style="color:grey; font-size:16px;">{{ dateFormat "Monday, Jan 2, 2006" .Date }}</div>
               <div style="color:grey; font-size:16px;">{{ if .Params.tags }}<strong>Tags:</strong> {{range .Params.tags}}<a href="{{ "/tags/" | relLangURL }}{{ . | urlize }}">{{ . }}</a> {{end}}{{end}}</div>
               <div style="color:grey; font-size:16px;">{{ if .Params.categories }}<strong>Categories:</strong> {{range .Params.categories}}<a href="{{ "/categories/" | relLangURL }}{{ . | urlize }}">{{ . }}</a> {{end}}{{end}}</div>
               <div style="color:grey; font-size:16px;">{{ if .Params.moods }}<strong>Moods:</strong> {{range .Params.moods}}<a href="{{ "/moods/" | relLangURL }}{{ . | urlize }}">{{ . }}</a> {{end}}{{end}}</div>

               <p style="font-size:18px;">{{.Summary}}</p>
          </div>
     {{ end }}
     {{ partial "footer" . }}
</body>
</html>
```

e.g.: `themes/<theme_name>/layouts/_default/single.html`:
```html
<html>
<head>
     <meta charset="UTF-8">
     <meta name="viewport" content="width=device-width, initial-scale=1.0">
     <meta http-equiv="X-UA-Compatible" content="ie=edge">
     <title>Document</title>
</head>
<body>
     {{ partial "header" (dict "Kind" .Kind "Template" "Single") }}

     <div style="margin:25px;">
          <h1>{{.Title}}</h1>
          <div style="color:grey; font-size:16px;">{{ dateFormat "Monday, Jan 2, 2006" .Date }}</div>
          <div style="color:grey; font-size:16px;">{{if .Params.author}}Author: {{.Params.Author}}{{end}}</div>
          <div style="font-size:18px;">{{.Content}}</div>
     </div>
     {{ partial "footer" . }}
</body>
</html>
```

## L12 List Page Templates

- `content/.../_index.md` - list pages of the site
- `themes/<theme_mame>/layouts/_default/list.html` - theme's list template used for list pages
- `layouts/_default/list.html` - overrides the theme's default list page template

`layouts/_default/list.html`:
```html
<html>
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
  Some Text
  {{ .Content }}
  {{ range .Pages }}
    {{ .Title }} <br>
    {{ .URL }} <br>
    <ul>
      <li><a href="{{ .URL }}">{{ .Title }}</a></li>
    </ul>
  {{ end }}
</body>
</html>
```
Shows the content of the files on the corresponding level

- variables: ```{{ .Content }} {{ .Title }} {{ .URL }}```
- function: ```{{ range .Pages }} ... {{ end }}```

## L13 Single Page Templates

- `content/.../<content>.md` - a content page of the site
- `themes/<theme_mame>/layouts/_default/single.html` - theme's single template used for single pages
- `layouts/_default/single.html` - overrides the theme's default single page template

`layouts/_default/single.html`:
```html
<html>
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
  <h1>Header</h1>
  <hr>
  <h3>{{ .Title }}</h3>
  <h4>{{ .Date }}</h4>
  {{ .Content }}
  <hr>
  <h2>Footer</h2>
</body>
</html>
```

- accessing built-in Front Matter variables:  ```{{ .Title }} {{ .Date }}```
- accessing custom Front Matter variables is different

## L14 Home Page Templates

- Home Page:
  - `localhost:1313/`
  - is technically a list page
  - by default uses list template
- `layouts/index.html` - overrides the theme's home page template

## L15 Section Templates

- Section Page:
  - `layouts/<dirname>` affects files in `content/<dirname>`
    - e.g.: `localhost:1313/dir1` is affected by files in `layouts/dir1`
- `layouts/<dirname>/single.html` - overrides single template of the section
- `layouts/<dirname>/list.html` - overrides list template of the section

## L16 Base Templates & Blocks

- organizes the layouts of the site
- higher level template
- avoids code duplication
- `layouts/_default/baseof.html` - overrides layouts of the theme

`layouts/_default/baseof.html`:
```html
<html>
<head>
  <meta charset="UTF-8">
  <title>Document</title>
</head>
<body>
  Top of baseof
  <hr>
  {{ block "main" . }}

  {{ end }}
  <br>
  {{ block "footer" . }}
    This is the default baseof of Footer
  {{ end }}
  <hr>
  Bottom of baseof
</body>
</html>
```

`layouts/_default/single.html`:
```html
{{ define "main" }}
  This is the single template
{{ end }}

{{ define "footer" }}
  This is the single footer
{{ end }}
```

`layouts/_default/list.html`:
```html
{{ define "main" }}
  This is the list template
{{ end }}
```

The `main` block is inserted into the overarching template.  
The single page uses it's own `footer` block from `single.html` file.  
The home page (a list page) uses the `footer` block from the `baseof.html` file.  

## L17 Variables

https://gohugo.io/variables

- can't be accessed from content folder
- can be defined in content files and layout folder (templates)

`content/a.md`:
```md
---
title: "A is the title"
date: 2017-09-02T17:50:43-04:00
draft: true
myVar: "myValue"
color: "blue"
---

This is the A markdown file.
```

Accessing front matter variables and custom front matter variables in `layouts/_default/single.html`:
```html
<h1>Single Template</h1><hr><br>

{{ .Title }}
{{ .Date }}
{{ .URL }}
{{ .Params.myVar }}

<h1 style="color: {{ .Params.color }};">title</h1>
```

Custom layout variables:
```html
{{ $myVarName1 := "aString" }}
{{ $myVarName2 := true }}
{{ $myVarName3 := 3 }}

{{ $myVarname1 }}
{{ $myVarname2 }}
{{ $myVarname3 }}
```

## L18 Functions

https://gohugo.io/functions

- can't be accessed from content folder
- can be defined in content files and layout folder (templates)

```html
{{ funcName param1 param2 }}
{{ truncate 10 "This is a really long string" }}
{{ add 1 5 }}
{{ sub 1 5 }}
{{ singularize "dogs" }}
{{ range .Pages}}
	{{ .Title }} <br>
{{ end }}
```

## L19 If Statements

- basic operators
  - `eq`
  - `lt`
  - `le`
  - `gt`
  - `ge`
  - `not`
  - `and`
  - `or`

`layouts/_default/<any>.html`, e.g.: `single.html`:
```html
<h1>Any Template</h1><hr><br>

{{ $var1 := "dog" }}
{{ $var2 := "cat" }}
{{ $var3 := 3 }}
{{ $var4 := 4 }}

{{ if eq $var1 $var2 }} True {{ else }} False {{ end }}
{{ if eq $var1 $var2 }}...{{ else if <cond>}}...{{ else }}...{{ end }}
{{ if not (eq $var1 $var2) }}
{{ if and (eq $var1 $var2) (lt $var3 $var4) }}...{{ end }}

{{ $title := .Title}}
{{ range .Site.Pages}}
	<li><a href="{{ .URL }}">{{ .Title }}</a></li>
	<li><a href="{{ .URL }}" style="{{ if eq .Title $title}} background-color:yellow;{{end}}" >{{ .Title }}</a></li>
{{ end }}
```

The value of the `.Title` is not the same inside and outside the range function, the scope changes, that's why is stored in a variable.

## L20 Data Files

- data file can be:
  - JSON
  - YAML
  - TOML

`data/states.json` contains the states of USA:
```json
{
  "AL": {
    "name": "Alabama",
    "capital": "Montgomery",
  },
  "AK": {
    "name": "Alaska",
    "capital": "Juneau"
  },
  ...
}
```

Access the data from any layout, `layouts/_default/<any>.html`, e.g.: `single.html`:
```html
{{ range .Site.Data.states }}
  {{ .name }} : {{ .capital }} <br>
{{ end }}
```

## L21 Partial Templates

- Make parts of the website modular
- Separate HTML file for header, footer, menu etc. injected into other different templates
- All partial templates should be HTML files

e.g.: `layouts/partials/header.html`:
```html
<h1>{{ .Title }}</h1>
<p>{{ .Date }}</p>
<hr>
<br>
```
e.g.: `layouts/_default/single.html`:
```html
{{ partial "header" . }}
{{ .Title }}
{{ .URL }}
{{ .Site.Pages }}
<h1>Single Template</h1><hr><br>
```

The `.` represents the entire collection, the scope of all the variables


Passing custom information using dictionaries:
e.g.: `layouts/partials/header.html`:
```html
<h1>{{ .myTitle }}</h1>
<p>{{ .myDate }}</p>
<hr>
<br>
```
e.g.: `layouts/_default/single.html`:
```html
{{ partial "header" (dict "myTitle" "myCustomTitle" "myDate" "myCustomDate") }}
{{ .Title }}
{{ .URL }}
{{ .Site.Pages }}
<h1>Single Template</h1><hr><br>
```

## L22 Shortcode Templates

- Essentially partial templates
- Instead of using them in layouts folder they are used in content folder

`layouts/shortcodes/myshortcode.html`:
```html
This is the shortcode text
```
`content/a.md`:
```md
---
title: "A"
date: 2017-09-02T17:50:43-04:00
draft: true
---

This is the A markdown file

{{< myshortcode >}}
```
The name of the shortcode is the name of the file

### Named parameter

`content/a.md`:
```md
---
title: "A"
date: 2017-09-02T17:50:43-04:00
draft: true
---

This is the A markdown file

{{< myshortcode color="blue" >}}
```
`layouts/shortcodes/myshortcode.html`:
```html
{{ .Get "color" }} is:
<p style="color : {{ .Get `color` }}">This is the frameworks text</p>
```

Escaping with the `"` character with `` ` ``

### Positional parameter

`content/a.md`:
```md
---
title: "A"
date: 2017-09-02T17:50:43-04:00
draft: true
---

This is the A markdown file

{{< myshortcode blue >}}
```
`layouts/shortcodes/myshortcode.html`:
```html
{{ .Get 0 }} is:
<p style="color : {{ .Get 0 }}">This is the frameworks text</p>
```

### Doubly tagged shortcodes

- More complex shortcodes with ending part

`content/a.md`:
```md
---
title: "A"
date: 2017-09-02T17:50:43-04:00
draft: true
---

This is the A markdown file
This is not highlighted text

{{< myshortcode >}}
	This is the text inside the shortcode tags
{{< /myshortcode >}}

This is not highlighted text
```
`layouts/shortcodes/myshortcode.html`:
```html
<p style="background-color:yellow;">{{ .Inner }}</p>
```

`.Inner` contains all the text contained by the shortcode tags

### Markdown text in doubly tagged shortcodes

`content/a.md`:
```md
---
title: "A"
date: 2017-09-02T17:50:43-04:00
draft: true
---

This is the A markdown file
This is not highlighted text

{{% myshortcode %}}
	Text inside \*\*shortcode\*\* text
{{% /myshortcode %}}

This is not highlighted text
```

## L23 Building Your Site

```sh
hugo server -D
# local server for development
# localhost:1313

hugo
# public folder is generated with static HTML files
```

Before rebuilding the site delete the `public` folder
